# RAG（检索增强生成）基本概念梳理

# 一、RAG核心定义

RAG 是 **Retrieval-Augmented Generation** 的缩写，中文译为**检索增强生成**，是一种融合「信息检索」与「生成式AI」的技术架构。

核心逻辑：让大语言模型（LLM）在生成回答前，先从外部知识库中检索相关、最新、精准的信息，再基于这些信息完成内容生成，相当于给大模型配备了「外挂知识库」。

关键特点：生成的内容严格锚定检索到的外部信息，可追溯、可验证，避免大模型仅凭自身训练数据作答的局限性。

# 二、RAG的核心价值（解决的核心问题）

## 1. 解决大模型「知识陈旧」问题

大语言模型的训练数据有明确时间截止点（如某模型训练至2023年），无法知晓训练后的新事件、新政策、新产品信息。

RAG通过接入实时更新的外部知识库（如企业最新SOP、行业新规），让模型生成内容紧跟最新动态（例：对接2025年企业新品资料，可准确回答新品参数）。

## 2. 解决大模型「幻觉」问题

大模型在缺乏足够依据时，可能编造看似合理但错误的内容（即「幻觉」）。

RAG遵循「检索到什么，就基于什么生成」的逻辑，生成内容以外部文档为依据，大幅降低幻觉概率，同时可附上参考来源供核验（例：医疗领域调取权威诊疗指南后生成建议）。

## 3. 解决企业「私有知识复用」问题

企业内部核心数据（如RPA流程手册、客户档案、财务制度）属于私有信息，无法直接用于大模型训练（存在数据泄露风险，且训练成本极高）。

RAG无需重新训练模型，仅需将私有文档处理后存入检索库，大模型可在不接触原始数据的前提下调取知识作答（例：员工提问「RPA财务发票流程怎么设计」，自动检索内部手册生成步骤）。

## 4. 降低大模型「微调成本」

传统领域适配（如法律、金融）需通过「模型微调」实现，需大量标注数据和高额算力成本。

RAG是轻量化适配方案：仅需构建领域知识库并优化检索策略，即可让通用大模型输出专业内容；更新知识时只需替换检索库文档，无需重新调整模型，成本远低于微调。

# 三、RAG的核心组件

RAG的完整链路需4个核心组件协同工作，各组件功能如下：

## 1. 文档处理模块

核心作用：将原始文档转化为可检索的结构化数据，核心工具包括LangChain、LlamaIndex。

关键操作：

- 文档加载：支持PDF、Word、TXT、Excel等多种格式，一键提取纯文本内容；

- 文档拆分：将长文档（如几十页手册）按语义或字符数（500-1000字）拆分为小片段（Chunk），避免信息杂乱影响检索精度；

- 格式标准化：统一文本编码、去除冗余格式（如页眉页脚、空行）。

## 2. 嵌入模型（Embedding Model）

核心作用：将自然语言文本转化为计算机可理解的数值向量（嵌入向量/Embedding），核心工具包括BAAI/bge-small-zh（中文轻量）、OpenAI Embedding等。

关键特性：

- 语义映射：理解文本语义，将任意长度文本转化为固定长度的数字数组（例：bge-small-zh生成384维向量）；

- 相似性关联：语义越相似的文本，生成的向量越接近（如「RPA发票录入步骤」与「RPA财务票据自动录入方法」向量相似度极高）。

## 3. 向量数据库

核心作用：存储嵌入模型生成的向量数据，并支持快速的向量相似度检索，核心工具包括Chroma、FAISS（轻量化）、Milvus、Weaviate（企业级）。

关键优势：

- 高效检索：通过余弦相似度、欧氏距离等算法，快速匹配与用户问题向量最相关的文本片段；

- 灵活扩展：支持批量向量存储与更新，适配不同规模的知识库（从个人文档到企业TB级数据）。

## 4. 生成式大模型

核心作用：基于用户问题和检索到的文本片段，生成通顺、精准、有依据的回答，核心工具包括Llama 2、Qwen（通义千问开源版，本地部署）、GPT-4、文心一言（云端调用）。

关键逻辑：接收「用户问题+检索到的参考片段」作为输入，结合自身语言理解能力，生成符合自然语言习惯的回答，并可标注内容来源。

# 四、RAG的基本工作流程

1. **知识入库阶段**：将外部文档（PDF/Word/数据库数据）通过文档处理模块拆分为文本片段；调用嵌入模型将片段转化为向量；将「文本片段+对应向量」存入向量数据库。

2. **用户交互阶段**：用户输入问题（如「RPA流程报错1001如何解决」）。

3. **检索匹配阶段**：将用户问题通过嵌入模型转化为向量；在向量数据库中检索与问题向量相似度最高的Top N文本片段（参考资料）。

4. **增强生成阶段**：将「用户问题+检索到的参考片段」一起输入大模型；模型基于参考资料生成准确回答，并附上参考来源。

5. **结果反馈阶段**：向用户返回回答及参考文档链接，方便用户核验内容准确性。

# 五、RAG的典型应用场景

- 企业内部知识问答：如员工查询RPA部署手册、财务制度、HR流程等；

- 智能客服：对接产品手册、售后问题库，精准解答用户咨询（如「如何重置RPA机器人密码」）；

- 专业领域辅助：法律（检索法条生成案例分析）、医疗（检索诊疗指南生成建议）、金融（检索监管政策生成合规方案）；

- 个人知识库：整理学习笔记、技术文档，通过对话方式快速检索（如「Python操作RPA组件的方法」）。

# 六、RAG与传统知识库的核心区别

|对比维度|传统知识库|RAG知识库|
|---|---|---|
|检索方式|关键词匹配（需精确输入关键词）|语义检索（理解问题含义，匹配相似内容）|
|输出形式|返回文档片段或链接，需用户自行筛选|生成结构化回答，附参考来源，无需手动筛选|
|知识更新|需手动上传更新文档，检索规则可能需调整|新增文档自动处理入库，无需修改核心逻辑|
|交互体验|需用户主动检索、浏览，交互较繁琐|自然语言对话交互，接近人工咨询体验|
> （注：文档部分内容可能由 AI 生成）